From 4c56e0137079ea600835a82c4ed155f0556f7d3e Mon Sep 17 00:00:00 2001
From: Humberto Borba <humberos@gmail.com>
Date: Sat, 17 Oct 2015 11:37:03 -0300
Subject: [PATCH 1/2] Revert "lz4: Add Android.mk file to build as a host
 static library"

This reverts commit 49f9b96255588932ee6d0c33e4c546d7475e5898.

Signed-off-by: Humberto Borba <humberos@gmail.com>
Change-Id: I9e7e96e0ebc413d654fe421dfec009c0cd18fa1d
---
 Android.mk     |  5 -----
 lib/Android.mk | 10 ----------
 2 files changed, 15 deletions(-)
 delete mode 100644 Android.mk
 delete mode 100644 lib/Android.mk

diff --git a/Android.mk b/Android.mk
deleted file mode 100644
index d81662e..0000000
--- a/Android.mk
+++ /dev/null
@@ -1,5 +0,0 @@
-# Copyright (C) 2015 The Android Open Source Project
-
-LOCAL_PATH:= $(call my-dir)
-
-include $(call all-makefiles-under,$(LOCAL_PATH))
diff --git a/lib/Android.mk b/lib/Android.mk
deleted file mode 100644
index 6817b20..0000000
--- a/lib/Android.mk
+++ /dev/null
@@ -1,10 +0,0 @@
-# Copyright (C) 2015 The Android Open Source Project
-
-LOCAL_PATH:= $(call my-dir)
-
-liblz4_src_files := lz4.c lz4hc.c lz4frame.c xxhash.c
-
-include $(CLEAR_VARS)
-LOCAL_MODULE := liblz4
-LOCAL_SRC_FILES := $(liblz4_src_files)
-include $(BUILD_HOST_STATIC_LIBRARY)
-- 
2.1.4


From 6359002c17908872cb199e0d78c4130053586d11 Mon Sep 17 00:00:00 2001
From: Steve Kondik <shade@chemlab.org>
Date: Tue, 7 Apr 2015 03:57:06 -0400
Subject: [PATCH 2/2] lz4: Enable building with Android

Signed-off-by: Humberto Borba <humberos@gmail.com>
Change-Id: Ibecdd663e550fe83d1def540c65c2b0c4970c3e2
---
 Android.mk | 35 +++++++++++++++++++++++++++++++++++
 1 file changed, 35 insertions(+)
 create mode 100644 Android.mk

diff --git a/Android.mk b/Android.mk
new file mode 100644
index 0000000..955d06b
--- /dev/null
+++ b/Android.mk
@@ -0,0 +1,35 @@
+LOCAL_PATH := $(call my-dir)
+
+common_c_includes := $(LOCAL_PATH)/lib
+common_src_files :=  \
+    lib/lz4.c \
+    lib/lz4frame.c \
+    lib/lz4hc.c \
+    lib/xxhash.c \
+    programs/lz4io.c
+
+include $(CLEAR_VARS)
+LOCAL_MODULE := liblz4-static
+LOCAL_C_INCLUDES := $(common_c_includes)
+LOCAL_SRC_FILES := $(common_src_files)
+LOCAL_MODULE_TAGS := optional
+include $(BUILD_STATIC_LIBRARY)
+
+include $(CLEAR_VARS)
+LOCAL_MODULE := liblz4
+LOCAL_C_INCLUDES := $(common_c_includes)
+LOCAL_SRC_FILES := $(common_src_files)
+LOCAL_MODULE_TAGS := optional
+include $(BUILD_HOST_STATIC_LIBRARY)
+
+include $(CLEAR_VARS)
+LOCAL_MODULE := lz4
+LOCAL_C_INCLUDES := $(common_c_includes)
+LOCAL_MODULE_TAGS := optional
+LOCAL_STATIC_LIBRARIES := liblz4-static
+
+LOCAL_SRC_FILES := \
+    programs/bench.c \
+    programs/lz4cli.c
+
+include $(BUILD_EXECUTABLE)
-- 
2.1.4

