From 80889475208ceb0e654f044a4f426a08ab7df178 Mon Sep 17 00:00:00 2001
From: xc-racer99 <xc-racer2@live.ca>
Date: Tue, 12 Apr 2016 20:13:10 -0700
Subject: [PATCH] ext4_utils: Add static build

---
 ext4_utils/Android.mk | 23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

diff --git a/ext4_utils/Android.mk b/ext4_utils/Android.mk
index 31a4b71..f2c9301 100644
--- a/ext4_utils/Android.mk
+++ b/ext4_utils/Android.mk
@@ -48,6 +48,29 @@ endif
 include $(BUILD_HOST_EXECUTABLE)
 
 
+include $(CLEAR_VARS)
+LOCAL_SRC_FILES := make_ext4fs_main.c canned_fs_config.c
+LOCAL_MODULE := utility_make_ext4fs
+LOCAL_MODULE_STEM := make_ext4fs
+LOCAL_MODULE_TAGS := optional
+LOCAL_FORCE_STATIC_EXECUTABLE := true
+LOCAL_PACK_MODULE_RELOCATIONS := false
+LOCAL_MODULE_CLASS := UTILITY_EXECUTABLES
+LOCAL_MODULE_PATH := $(PRODUCT_OUT)/utilities
+LOCAL_UNSTRIPPED_PATH := $(PRODUCT_OUT)/symbols/utilities
+LOCAL_STATIC_LIBRARIES += \
+    libext4_utils_static \
+    libselinux \
+    libmincrypt \
+    libsparse_static \
+    libz \
+    libcutils \
+    libc \
+    liblog
+
+include $(BUILD_EXECUTABLE)
+
+
 #
 # -- All host/targets excluding windows
 #
-- 
2.1.4

